
---

系統流程說明

1. 使用者登入並選擇機器

使用者登入系統並選擇機器後，伺服器生成 json1 資料給 Arduino Nano 33 IoT 裝置 Get。

流程：Nano 33 IoT 使用 GET 請求獲取 json1 資料。



2. 使用者從充電站取出裝置

使用者將裝置從充電站取出，充電站發送 json2 資料，表示該機器已啟用。

伺服器動作：網頁鎖定該機器，使其他使用者無法選取。



3. 開始運動計時

使用者開始運動，系統開始計時並累積秒數。

如果使用者 休息超過 10 秒：

上傳 json3 資料到伺服器。

伺服器回覆 ok 後，回到動作選擇畫面。

伺服器 透過 GET 獲取 json3 資料並寫入資料庫。


如果使用者 休息未超過 10 秒：

持續計算運動時間，無需上傳 json3。




4. 運動結束，回到充電站

使用者完成運動並將裝置放回充電站：

充電站根據卡片資訊，更新 json2 中機器狀態為 false。

在動作選擇頁面中，若 超過 5 秒無任何操作，系統會透過 GET 每 5 秒檢查一次 json2 的狀態：

若狀態為 false，系統清除暫存的 json1 資料，回到初始等待狀態，準備讓下一位使用者使用。





5. 伺服器同步狀態更新

伺服器監測所有機器的狀態，若有狀態變更，則解綁該機器，讓其他使用者可選擇使用。





---

